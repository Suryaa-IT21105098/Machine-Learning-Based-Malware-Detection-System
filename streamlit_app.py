import os
import streamlit as st

from file_checker import checkFile

st.title("Machine-Learning-Based-Malware-Detection-System")
st.markdown("""###  
Malwares can wreak havoc on a computer and its network. Hackers use it to steal passwords, delete files and render computers inoperable. A malware infection can cause many problems that affect daily operation and the long-term security of your company.

This is a python program for detecting whether a given file is 
a probable malware or not! It uses [Random Forest Algorithm](https://en.wikipedia.org/wiki/Random_forest) for 
classification.""")
st.subheader("Try yourself:-")

file = st.file_uploader("Upload a file to check for malwares:", accept_multiple_files=True)
if len(file):
    with st.spinner("Checking..."):
        for i in file:
            open('malwares/tempFile', 'wb').write(i.getvalue())
            legitimate = checkFile("malwares/tempFile")
            os.remove("malwares/tempFile")
            if legitimate:
                st.write(f"File {i.name} seems *LEGITIMATE*!")
            else:
                st.markdown(f"File {i.name} is probably a **MALWARE**!!!")
# Define custom colors
background_color = "#f4f4f4"  # Light gray
main_color = "#008080"  # Dark cyan
text_color = "#ffffff"  # White

# Apply custom CSS for better visuals
st.markdown(
    f"""
    <style>
    .reportview-container {{
        background-color: {background_color};
    }}
    .sidebar .sidebar-content {{
        background-color: {main_color};
        color: {text_color};
    }}
    .Widget>label {{
        color: {text_color};
    }}
    .stButton>button {{
        background-color: {main_color};
        color: {text_color};
        padding: 8px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        transition-duration: 0.4s;
        cursor: pointer;
        border-radius: 8px;
    }}
    .stButton>button:hover {{
        background-color: #006666;  /* Darken the hover color slightly */
    }}
    </style>
    """,
    unsafe_allow_html=True
)
